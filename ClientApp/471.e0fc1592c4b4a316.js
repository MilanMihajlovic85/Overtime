"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[471],{4464:(Z,y,n)=>{n.d(y,{F:()=>R});var e=n(1135),t=n(4004),v=n(262),u=n(2843),O=n(8505),b=n(3151),I=n(2340),P=n(4650),E=n(529),M=n(6832);let R=(()=>{class x{constructor(f,c){this.http=f,this.messagesSrv=c,this.reports$=new e.X([]),this.reports=this.reports$.asObservable()}getReports(f){return this.http.get(`${I.N.apiUrl}${f}`).pipe((0,t.U)(c=>c.map(m=>({id:m.ID,requestorId:m.Requestor_ID,requestorWO:m.Requestor_WO,requestorFullName:m.Requestor_FullName,requestorWOManager:m.Requestor_WO_Manager,requestorDepartment:m.Requestor_Department,requestorForWO:m.Requestor_For_WO,requestorForProject:m.Requestor_For_Project,reason:m.Reason,startTime:new Date(m.Start_Time),endTime:new Date(m.End_Time),minutes:m.Minutes,status:2==+m.Status?"Approved":"Declined",responseDate:new Date(m.ResponseDate),createdAt:new Date(m.CreateDate)}))),(0,v.K)(c=>(this.messagesSrv.showErrors(c.error.Message?c.error.Message:c.status&&c.statusText?c.status+" "+c.statusText:c.message),(0,u._)(()=>c))),(0,O.b)(c=>{this.reports$.next(c.sort((m,U)=>m.createdAt<U.createdAt?1:m.createdAt>U.createdAt?-1:0))}),(0,b.d)())}}return x.\u0275fac=function(f){return new(f||x)(P.LFG(E.eN),P.LFG(M.K))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},481:(Z,y,n)=>{n.d(y,{u:()=>k});var e=n(4650),t=n(9841),v=n(4004),u=n(8529),O=n(6895),b=n(8373),I=n(4464),P=n(671),E=n(603),M=n(245);function R(s,p){if(1&s&&e._UZ(0,"ion-icon",10),2&s){const a=e.oxw(2).$implicit,_=e.oxw(4);e.Q6J("ios",_.getStatusIcon(a.status)+"-outline")("md",_.getStatusIcon(a.status)+"-sharp")("color",_.getStatusIconColor(a.status))}}function x(s,p){if(1&s&&(e.TgZ(0,"h2"),e._uU(1),e.YNc(2,R,1,3,"ion-icon",9),e.qZA()),2&s){const a=p.$implicit,_=e.oxw().$implicit,d=e.oxw(4);e.xp6(1),e.hij(" ",_[a]," "),e.xp6(1),e.Q6J("ngIf",d.showStatusIcon)}}function A(s,p){if(1&s&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&s){const a=p.$implicit,_=e.oxw().$implicit;e.xp6(1),e.Oqu(_[a])}}function f(s,p){if(1&s&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&s){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",e.xi3(2,2,a.startTime,"dd/MM/yyyy HH:mm")," - ",e.xi3(3,5,a.endTime,"HH:mm"),"")}}function c(s,p){if(1&s){const a=e.EpF();e.TgZ(0,"ion-item",7),e.NdJ("click",function(){const D=e.CHM(a).$implicit,C=e.oxw(4);return e.KtG(C.onSelectElement(D,!0))}),e.TgZ(1,"ion-label"),e.YNc(2,x,3,2,"h2",8),e.YNc(3,A,2,1,"p",8),e.YNc(4,f,4,8,"p",2),e.qZA()()}if(2&s){const a=e.oxw(4);e.xp6(2),e.Q6J("ngForOf",a.schema.title),e.xp6(1),e.Q6J("ngForOf",a.schema.subtitle),e.xp6(1),e.Q6J("ngIf",a.showTimeInterval)}}function m(s,p){if(1&s&&(e.TgZ(0,"ion-list"),e.YNc(1,c,5,3,"ion-item",6),e.qZA()),2&s){const a=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",a.elements)}}function U(s,p){1&s&&(e.TgZ(0,"p",11),e._uU(1,"No Data"),e.qZA(),e._UZ(2,"ion-icon",12))}function K(s,p){if(1&s){const a=e.EpF();e.ynx(0),e.YNc(1,m,2,1,"ion-list",0),e.TgZ(2,"ion-infinite-scroll",3),e.NdJ("ionInfinite",function(d){e.CHM(a);const D=e.oxw(2);return e.KtG(D.doInfinite(d))}),e._UZ(3,"ion-infinite-scroll-content",4),e.qZA(),e.YNc(4,U,3,0,"ng-template",null,5,e.W1O),e.BQk()}if(2&s){const a=e.MAs(5),_=e.oxw(2);e.xp6(1),e.Q6J("ngIf",_.elements.length>0)("ngIfElse",a)}}function S(s,p){if(1&s&&(e.ynx(0),e._UZ(1,"app-loading"),e.YNc(2,K,6,2,"ng-container",2),e.BQk()),2&s){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.elements)}}function $(s,p){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const a=p.$implicit,_=e.oxw(2);e.xp6(1),e.hij("",_.activeElement[a]," ")}}function F(s,p){if(1&s&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.qZA()),2&s){const a=p.$implicit;e.xp6(1),e.Oqu(a.key)}}function N(s,p){if(1&s&&(e.TgZ(0,"mat-cell",23),e._uU(1),e.qZA()),2&s){const a=p.$implicit;e.xp6(1),e.Oqu(a.val)}}function Y(s,p){1&s&&e._UZ(0,"mat-row")}function Q(s,p){if(1&s&&(e.TgZ(0,"ion-button",26),e._UZ(1,"ion-icon",27),e.qZA()),2&s){const a=p.$implicit;e.s9C("color",a.mobileColor),e.xp6(1),e.s9C("name",a.mobileIcon)}}function j(s,p){if(1&s&&(e.TgZ(0,"div",24),e.YNc(1,Q,2,2,"ion-button",25),e.qZA()),2&s){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.btns)}}const J=function(){return["key","val"]};function H(s,p){if(1&s){const a=e.EpF();e.TgZ(0,"div",13)(1,"ion-button",14),e.NdJ("click",function(){e.CHM(a);const d=e.oxw();return e.KtG(d.onBackToList())}),e._UZ(2,"ion-icon",15),e._uU(3," Back To List "),e.qZA(),e.TgZ(4,"h1"),e.YNc(5,$,2,1,"span",8),e.qZA(),e.TgZ(6,"mat-table",16),e.ynx(7,17),e.YNc(8,F,2,1,"mat-header-cell",18),e.BQk(),e.ynx(9,19),e.YNc(10,N,2,1,"mat-cell",20),e.BQk(),e.YNc(11,Y,1,0,"mat-row",21),e.qZA(),e.YNc(12,j,2,1,"div",22),e.qZA()}if(2&s){const a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.schema.title),e.xp6(1),e.Q6J("dataSource",a.dataSource),e.xp6(5),e.Q6J("matRowDefColumns",e.DdM(4,J)),e.xp6(1),e.Q6J("ngIf",a.btns.length>0)}}let k=(()=>{class s{constructor(a,_,d,D){this.datePipe=a,this.i18n=_,this.reportSrv=d,this.loadingSrv=D,this.modalOpen=new e.vpe,this.elementSelected=new e.vpe,this.showTimeInterval=!1,this.showStatusIcon=!1,this.isCreateBtn=!1,this.itemListData=[],this.page_number=1,this.page_limit=15,this.dataSource=[],this.value="",this.showList=!0}ngOnInit(){let a;"create"in this.buttons&&(this.isCreateBtn=!0,delete this.buttons.create),this.btns=Object.values(this.buttons),this.showStatusIcon=this.schema.properties.includes("status")&&("requestorForProject"===this.schema.title[0]||"requestorForWO"===this.schema.title[0]),this.showTimeInterval=this.schema.properties.includes("startTime")&&this.schema.properties.includes("endTime"),a=this.schema.extended?(0,t.a)([this.i18n.translateProperties(this.schema.properties),this.i18n.translateProperties(this.schema.extended)]).pipe((0,v.U)(([_,d])=>({properties:_,extended:d}))):(0,t.a)([this.i18n.translateProperties(this.schema.properties)]).pipe((0,v.U)(([_])=>({properties:_}))),a.subscribe(_=>{this.translatedSchema=_})}ngOnChanges(a){this.searchData=a.searchData.currentValue,this.page_number=1,this.getElements(!1,"")}getElements(a,_){const d=this.datePipe.transform(this.searchData.startDate,"yyyy-MM-dd"),D=this.datePipe.transform(this.searchData.endDate,"yyyy-MM-dd");let C,w;switch(this.category){case"myRequests":C="/Reports/MyRequestsFromHistory";break;case"departments":C=`/Reports/DepartmentFromHistory/${this.searchData.department}`;break;case"organizations":C=`/Reports/WOFromHistory/${this.searchData.organization}`;break;case"projects":C=`/Reports/ProjectFromHistory/${this.searchData.project}`}C=`${C}/${d}/${D}/${this.page_limit}/${this.page_number}`,w=this.elements?this.reportSrv.getReports(C):this.loadingSrv.showLoaderUntilCompleted(this.reportSrv.getReports(C)),w.subscribe(W=>{a||(this.elements=[]);for(let B=0;B<W.length;B++)this.elements.push(W[B]);a&&_.target.complete(),this.page_number++})}doInfinite(a){this.getElements(!0,a)}onSelectElement(a,_){this.selectedElement=a,_&&(this.activeElement=a,this.setDataSource()),this.elementSelected.emit(!1)}onBackToList(){this.activeElement=null,this.dataSource=[],this.elementSelected.emit(!0)}setDataSource(){this.dataSource=[];const a={...this.translatedSchema.properties,...this.translatedSchema.extended};for(const _ in a)if(_ in a){const d=a[_];if(!this.schema.title.includes(d)){let D;D="createdAt"===d?this.activeElement[d]?this.datePipe.transform(this.activeElement[d],"dd/MM/yyyy"):this.activeElement[d]:"startTime"===d||"endTime"===d||"responseDate"===d?this.datePipe.transform(this.activeElement[d],"dd/MM/yyyy HH:ss"):this.activeElement[d],this.dataSource.push({key:_,val:D})}}}getStatusIcon(a){switch(a){case"Approved":return"checkmark-circle";case"Pending":return"time-outline";default:return"ban"}}getStatusIconColor(a){switch(a){case"Approved":return"success";case"Pending":return"warning";default:return"danger"}}}return s.\u0275fac=function(a){return new(a||s)(e.Y36(O.uU),e.Y36(b.D),e.Y36(I.F),e.Y36(u.b))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-paginated-list"]],inputs:{searchData:"searchData",schema:"schema",buttons:"buttons",category:"category"},outputs:{modalOpen:"modalOpen",elementSelected:"elementSelected"},features:[e._Bn([u.b]),e.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["details",""],[4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading..."],["noData",""],["detail","true",3,"click",4,"ngFor","ngForOf"],["detail","true",3,"click"],[4,"ngFor","ngForOf"],["class","status-icon",3,"ios","md","color",4,"ngIf"],[1,"status-icon",3,"ios","md","color"],[1,"no-data"],["name","alert-circle-outline",1,"no-data"],[1,"details"],["fill","clear",3,"click"],["slot","start","name","caret-back-outline"],[3,"dataSource"],["matColumnDef","key"],[4,"matCellDef"],["matColumnDef","val"],["style","text-align: center;",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],["class","buttons",4,"ngIf"],[2,"text-align","center"],[1,"buttons"],["fill","solid",3,"color",4,"ngFor","ngForOf"],["fill","solid",3,"color"],["slot","icon-only",3,"name"]],template:function(a,_){if(1&a&&(e.YNc(0,S,3,1,"ng-container",0),e.YNc(1,H,13,5,"ng-template",null,1,e.W1O)),2&a){const d=e.MAs(2);e.Q6J("ngIf",!_.activeElement)("ngIfElse",d)}},dependencies:[O.sg,O.O5,P.BZ,P.w1,P.Dz,P.nj,P.ge,P.ev,P.Gk,E.YG,E.gu,E.ju,E.MB,E.Ie,E.Q$,E.q_,M.N,O.uU],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{width:94%;margin:2rem auto 0;display:block}  .content-wrapper .mat-mdc-form-field{margin:0 auto}.mat-mdc-outlined-button.mat-mdc-button-base[_ngcontent-%COMP%]{margin:0 0 .5rem 1rem}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control[_ngcontent-%COMP%]{font-size:large}.mat-mdc-form-field-flex[_ngcontent-%COMP%]{background-color:#f1f1e6}.list-content[_ngcontent-%COMP%]{height:calc(100vh - 96px)}.mat-mdc-list-item[_ngcontent-%COMP%]{background-color:#f1f1e6;border-radius:5px;width:94%;margin:0 auto .25rem}.mat-mdc-list-item[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]{font-size:1.3rem}.mat-mdc-list-item-title[_ngcontent-%COMP%]{color:#613e49}.cdk-virtual-scroll-content-wrapper[_ngcontent-%COMP%]{padding-top:.5rem}.mdc-list-item.mdc-list-item--with-one-line[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.item-content-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item-content[_ngcontent-%COMP%]{width:100%}.mdc-list-item--with-two-lines[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]:before, .mdc-list-item--with-three-lines[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]:before{display:none}h1[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;background-color:#f1f1e6;padding:2px 0;margin-bottom:0;border-radius:4px 4px 0 0;font-size:1.3rem}.details[_ngcontent-%COMP%]{height:calc(100vh - 56px);padding:0 .6rem 3rem;overflow:auto}.details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem}.details[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{margin-bottom:3rem}.details[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:1rem;border-left:1px solid rgba(0,0,0,.12);border-right:1px solid rgba(0,0,0,.12);flex:0 0 40%}.details[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{font-size:1rem;border-right:1px solid rgba(0,0,0,.12);display:grid}.details[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:last-child   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.details[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;flex-wrap:wrap;position:fixed;left:-3vw;bottom:0;width:103vw;background-color:#f1f1e6;height:4rem}"]}),s})()},5459:(Z,y,n)=>{n.d(y,{i:()=>f});var e=n(6895),t=n(603),v=n(4006),u=n(9549),O=n(284),b=n(7392),I=n(4859),P=n(6338),E=n(4850),M=n(8605),R=n(671),x=n(591),A=n(4650);let f=(()=>{class c{}return c.\u0275fac=function(U){return new(U||c)},c.\u0275mod=A.oAB({type:c}),c.\u0275inj=A.cJS({imports:[e.ez,v.u5,u.lN,O.c,b.Ps,I.ot,P.ie,R.p0,E.t,M.Cl,t.Pc,x.I]}),c})()},3711:(Z,y,n)=>{n.d(y,{v:()=>X});var e=n(7340),t=n(4650),v=n(8739),u=n(671),O=n(9841),b=n(4004),I=n(5698),P=n(8675),E=n(3900),M=n(6895),R=n(8373),x=n(4464),A=n(8529),f=n(7392),c=n(4859),m=n(266),U=n(6308),K=n(9383);function S(i,g){if(1&i){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(o);const l=t.oxw(2);return t.KtG(l.manageAllRows())}),t.TgZ(1,"mat-icon"),t._uU(2,"unfold_more"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"btn.expandAll")," "))}function $(i,g){if(1&i){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(o);const l=t.oxw(2);return t.KtG(l.manageAllRows())}),t.TgZ(1,"mat-icon"),t._uU(2,"unfold_less"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"btn.closeAll")," "))}function F(i,g){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,S,5,3,"button",13),t.YNc(2,$,5,3,"button",14),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",!o.rowsExpanded),t.xp6(1),t.Q6J("ngIf",o.rowsExpanded)}}function N(i,g){if(1&i&&(t.TgZ(0,"th",20),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.header)}}function Y(i,g){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const o=g.$implicit,r=t.oxw().$implicit;t.ekj("expanded",o.expanded),t.xp6(1),t.Oqu(r.cell(o))}}function Q(i,g){1&i&&(t.ynx(0,17),t.YNc(1,N,2,1,"th",18),t.YNc(2,Y,2,3,"td",19),t.BQk()),2&i&&t.Q6J("matColumnDef",g.$implicit.columnDef)}function j(i,g){1&i&&t._UZ(0,"th",24)}function J(i,g){if(1&i){const o=t.EpF();t.TgZ(0,"td",25)(1,"button",26),t.NdJ("click",function(){const h=t.CHM(o).$implicit,T=t.oxw().$implicit,L=t.oxw();return t.KtG(L.openModal(L.buttons[T].modal,h))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA()()()}if(2&i){const o=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.s9C("color",r.buttons[o].color),t.s9C("matTooltip",t.lcZ(2,3,r.buttons[o].tooltip)),t.xp6(3),t.Oqu(r.buttons[o].icon)}}function H(i,g){1&i&&(t.ynx(0,17),t.YNc(1,j,1,0,"th",22),t.YNc(2,J,5,5,"td",23),t.BQk()),2&i&&t.Q6J("matColumnDef",g.$implicit)}function k(i,g){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const o=t.oxw().$implicit,r=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,r[o.val],"dd/MM/yyyy HH:mm")," ")}}function s(i,g){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit,r=t.oxw().$implicit;t.xp6(1),t.Oqu(r[o.val])}}const p=function(){return["Opened","Responded","Closed"]},a=function(){return["Otvoren","Odgovoreno","Zatvoren"]};function _(i,g){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.YNc(3,k,3,4,"td",29),t.YNc(4,s,2,1,"ng-template",null,30,t.W1O),t.BQk()),2&i){const o=g.$implicit,r=t.MAs(5);t.xp6(2),t.Oqu(o.key),t.xp6(1),t.Q6J("ngIf",t.DdM(3,p).includes(o.key)||t.DdM(4,a).includes(o.key))("ngIfElse",r)}}function d(i,g){if(1&i&&(t.TgZ(0,"td",21)(1,"div",27)(2,"table")(3,"tbody")(4,"tr"),t.YNc(5,_,6,5,"ng-container",28),t.qZA()()()()()),2&i){const o=g.$implicit,r=t.oxw();t.ekj("expanded-row",o.expanded)("not-expanded-row",!o.expanded),t.uIk("colspan",r.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",o.expanded?"expanded":"collapsed"),t.xp6(4),t.Q6J("ngForOf",r.extendedRowData)}}function D(i,g){if(1&i&&(t.TgZ(0,"tr",31)(1,"td",32),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const o=t.oxw();t.xp6(1),t.Udp("text-align","center")("height",40,"px"),t.uIk("colspan",o.displayedColumns.length),t.xp6(1),t.hij(" ",t.lcZ(3,6,"labels.noData")," ")}}function C(i,g){1&i&&t._UZ(0,"tr",33),2&i&&t.Udp("height",40,"px")}function w(i,g){if(1&i){const o=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const h=t.CHM(o).$implicit,T=t.oxw();return t.KtG(T.toggleRow(h))}),t.qZA()}}function W(i,g){1&i&&t._UZ(0,"tr",36)}const B=function(){return["expandedDetail"]};function z(i,g){1&i&&(t.ynx(0),t.YNc(1,W,1,0,"tr",35),t.BQk()),2&i&&(t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(1,B)))}const G=function(){return[10,25,50]};let X=(()=>{class i{constructor(o,r,l,h){this.datePipe=o,this.i18n=r,this.reportSrv=l,this.loadingSrv=h,this.modalOpen=new t.vpe,this.extendedRowData=[],this.columns=[],this.rowsExpanded=!1,this.itemListData=[],this.page_number=0,this.page_limit=10,this.resultsLength=0}ngOnInit(){const o=this.schema.properties;let r;r=this.schema.extended?(0,O.a)([this.i18n.translateProperties(o),this.i18n.translateProperties(this.schema.extended)]).pipe((0,b.U)(([l,h])=>({properties:l,extended:h}))):(0,O.a)([this.i18n.translateProperties(o)]).pipe((0,b.U)(([l])=>({properties:l}))),r.pipe((0,I.q)(1)).subscribe(l=>{if(this.translatedSchema=l,l.extended)for(const h in l.extended)Object.prototype.hasOwnProperty.call(l.extended,h)&&this.extendedRowData.push({key:h,val:l.extended[h]});for(const h in l.properties)if(Object.prototype.hasOwnProperty.call(l.properties,h)){const T=l.properties[h];this.columns.push({columnDef:T,header:h,cell:L=>"responseDate"===T||"createdAt"===T?this.datePipe.transform(L[T],"dd/MM/yyyy"):"startTime"===T||"endTime"===T?this.datePipe.transform(L[T],"dd/MM/yyyy HH:mm"):L[T]})}this.btnColumns=Object.keys(this.buttons).filter(h=>"create"!==h),this.displayedColumns=this.columns.map(h=>h.columnDef).concat(this.btnColumns)})}ngAfterViewInit(){this.paginator.page.pipe((0,P.O)({}),(0,E.w)(()=>(this.url=this.getUrl(),this.loadingSrv.showLoaderUntilCompleted(this.reportSrv.getReports(this.url)))),(0,b.U)(o=>null===o?[]:(this.resultsLength=150,o))).subscribe(o=>{this.dataSource=new u.by(o)})}toggleRow(o){this.dataSource.data.forEach(r=>{r.expanded=!1}),o.expanded=!o.expanded}manageAllRows(){this.rowsExpanded=!this.rowsExpanded,this.dataSource.data.forEach(o=>{o.expanded=this.rowsExpanded})}openModal(o,r){this.modalOpen.emit({modal:o,data:r})}getUrl(){const o=this.datePipe.transform(this.searchData.startDate,"yyyy-MM-dd"),r=this.datePipe.transform(this.searchData.endDate,"yyyy-MM-dd");let l;switch(this.category){case"myRequests":l="/Reports/MyRequestsFromHistory";break;case"departments":l=`/Reports/DepartmentFromHistory/${this.searchData.department}`;break;case"organizations":l=`/Reports/WOFromHistory/${this.searchData.organization}`;break;case"projects":l=`/Reports/ProjectFromHistory/${this.searchData.project}`}return l=`${l}/${o}/${r}/${this.paginator.pageIndex+1}/${this.paginator.pageSize}`,console.log(l),l}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(M.uU),t.Y36(R.D),t.Y36(x.F),t.Y36(A.b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-paginated-table"]],viewQuery:function(o,r){if(1&o&&t.Gf(v.NW,7),2&o){let l;t.iGM(l=t.CRH())&&(r.paginator=l.first)}},inputs:{searchData:"searchData",schema:"schema",category:"category",buttons:"buttons"},outputs:{modalOpen:"modalOpen"},decls:13,vars:11,consts:[[1,"table-wrapper"],["class","table-buttons",4,"ngIf"],["mat-table","","matSort","","matSortDisableClear","","multiTemplateDataRows","",3,"dataSource"],["TableSort","matSort"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",3,"expanded-row","not-expanded-row",4,"matCellDef"],["class","mat-row",4,"matNoDataRow"],["mat-header-row","",3,"Height",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],[1,"table-buttons"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","primary",3,"click"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","",3,"expanded",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",2,"text-align","center"],["mat-cell",""],["mat-header-cell","","class","btn-header-cell",4,"matHeaderCellDef"],["mat-cell","","class","btn-cell",4,"matCellDef"],["mat-header-cell","",1,"btn-header-cell"],["mat-cell","",1,"btn-cell"],["mat-icon-button","",3,"color","matTooltip","click"],[1,"element-detail"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["notDate",""],[1,"mat-row"],[1,"mat-cell"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"detail-row"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.YNc(1,F,3,2,"div",1),t.TgZ(2,"table",2,3),t.YNc(4,Q,3,1,"ng-container",4),t.YNc(5,H,3,1,"ng-container",4),t.ynx(6,5),t.YNc(7,d,6,7,"td",6),t.BQk(),t.YNc(8,D,4,8,"tr",7),t.YNc(9,C,1,2,"tr",8),t.YNc(10,w,1,0,"tr",9),t.YNc(11,z,2,2,"ng-container",10),t.qZA()(),t._UZ(12,"mat-paginator",11)),2&o&&(t.xp6(1),t.Q6J("ngIf",r.extendedRowData.length>0),t.xp6(1),t.Q6J("dataSource",r.dataSource),t.xp6(2),t.Q6J("ngForOf",r.columns),t.xp6(1),t.Q6J("ngForOf",r.btnColumns),t.xp6(4),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",r.extendedRowData.length>0),t.xp6(1),t.Q6J("length",r.resultsLength)("pageSize",10)("pageSizeOptions",t.DdM(10,G)))},dependencies:[M.sg,M.O5,f.Hw,c.lW,c.RK,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,m.gM,v.NW,U.YE,U.nU,M.uU,K.X$],data:{animation:[(0,e.X$)("detailExpand",[(0,e.SB)("collapsed",(0,e.oB)({height:"0px",minHeight:"0"})),(0,e.SB)("expanded",(0,e.oB)({height:"*"})),(0,e.eR)("expanded <=> collapsed",(0,e.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),i})()},871:(Z,y,n)=>{n.d(y,{e:()=>A});var e=n(6895),t=n(603),v=n(4006),u=n(7392),O=n(4859),b=n(671),I=n(591),P=n(9383),E=n(6308),M=n(8739),R=n(266),x=n(4650);let A=(()=>{class f{}return f.\u0275fac=function(m){return new(m||f)},f.\u0275mod=x.oAB({type:f}),f.\u0275inj=x.cJS({imports:[e.ez,v.u5,u.Ps,O.ot,b.p0,R.AV,t.Pc,I.I,P.aw,M.TU,E.JX]}),f})()}}]);