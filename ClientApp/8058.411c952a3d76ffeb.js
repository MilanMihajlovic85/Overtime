"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8058],{8058:(A,g,e)=>{e.r(g),e.d(g,{RequestsPageModule:()=>N});var i=e(6895),p=e(4006),a=e(603),_=e(671),P=e(3900),f=e(8505),t=e(4650),h=e(9586),v=e(2139),E=e(8529),c=e(9383),M=e(7632),m=e(7408),O=e(245),r=e(7610),T=e(7785);function D(s,l){1&s&&(t.TgZ(0,"ion-buttons",7),t._UZ(1,"app-logout"),t.qZA())}function I(s,l){if(1&s){const n=t.EpF();t.TgZ(0,"app-list",12),t.NdJ("modalOpen",function(u){t.CHM(n);const d=t.oxw(3);return t.KtG(d.openModal(u))}),t.qZA()}if(2&s){const n=t.oxw(3);t.Q6J("data",n.requestsData.data)("schema",n.schema)("buttons",n.buttons)}}function R(s,l){if(1&s&&(t.TgZ(0,"ion-col",10),t.YNc(1,I,1,3,"app-list",11),t.qZA()),2&s){const n=t.oxw(2),o=t.MAs(17);t.xp6(1),t.Q6J("ngIf",n.requestsData.data.length>0)("ngIfElse",o)}}function Z(s,l){if(1&s){const n=t.EpF();t.TgZ(0,"app-table",12),t.NdJ("modalOpen",function(u){t.CHM(n);const d=t.oxw(3);return t.KtG(d.openModal(u))}),t.qZA()}if(2&s){const n=t.oxw(3);t.Q6J("data",n.requestsData)("schema",n.desktopSchema)("buttons",n.buttons)}}function x(s,l){if(1&s&&(t.TgZ(0,"ion-col"),t.YNc(1,Z,1,3,"app-table",11),t.qZA()),2&s){const n=t.oxw(2),o=t.MAs(17);t.xp6(1),t.Q6J("ngIf",n.requestsData.data.length>0)("ngIfElse",o)}}function C(s,l){if(1&s&&(t.TgZ(0,"ion-row"),t.YNc(1,R,2,2,"ion-col",8),t.ALo(2,"async"),t.YNc(3,x,2,2,"ng-template",null,9,t.W1O),t.qZA()),2&s){const n=t.MAs(4),o=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,o.isDesktop$))("ngIfElse",n)}}function q(s,l){1&s&&(t.TgZ(0,"h1"),t._uU(1,"No Data"),t.qZA(),t._UZ(2,"ion-icon",13))}let W=(()=>{class s{constructor(n,o,u,d,Y){this.screenSizeSrv=n,this.requestSrv=o,this.loadingSrv=u,this.alertController=d,this.translate=Y,this.isDesktop$=this.screenSizeSrv.isDesktopView(),this.requestsData=new _.by([]),this.buttons={delete:{modal:"delete",icon:"delete_outline",color:"warn",mobileIcon:"trash",mobileColor:"danger",tooltip:"btn.delete"}},this.desktopSchema={properties:["requestorForProject","requestorForWO","requestorDepartment","minutes","requestorWOManager","startTime","endTime","reason","createdAt"],noSearch:!0},this.schema={properties:["minutes","reason","startTime","endTime","requestorDepartment","requestorWO","requestorWOManager","requestorForWO","requestorForProject","createdAt"],title:["requestorForProject"],subtitle:["requestorForWO"],period:["startTime","endTime"]},this.requests$=this.loadingSrv.showLoaderUntilCompleted(this.requestSrv.getMyRequests()).pipe((0,P.w)(()=>this.requestSrv.requests),(0,f.b)(F=>{this.requestsData.data=F}))}ngOnInit(){}openModal(n){this.alertController.create({header:this.translate.instant("messagess.deleteWarning"),message:this.translate.instant("messagess.deleteRequest",{projectId:n.data.requestorForProject}),cssClass:"delete-alert",buttons:[{text:this.translate.instant("btn.cancel"),cssClass:"alert-button-cancel"},{text:this.translate.instant("btn.delete"),cssClass:"delete-alert-button-confirm",handler:()=>{this.requestSrv.deleteRequest(+n.data.id).subscribe()}}]}).then(o=>{o.present()})}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(h.j),t.Y36(v.s),t.Y36(E.b),t.Y36(a.Br),t.Y36(c.sK))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-requests"]],decls:18,vars:14,consts:[[3,"translucent"],["slot","start"],["slot","end",4,"ngIf"],[1,"ion-padding",3,"fullscreen"],[1,"ion-padding-top"],[4,"ngIf"],["noData",""],["slot","end"],["size","12","size-md","8","push-md","2",4,"ngIf","ngIfElse"],["table",""],["size","12","size-md","8","push-md","2"],[3,"data","schema","buttons","modalOpen",4,"ngIf","ngIfElse"],[3,"data","schema","buttons","modalOpen"],["name","alert-circle-outline"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.YNc(8,D,2,0,"ion-buttons",2),t.ALo(9,"async"),t.qZA()(),t._UZ(10,"app-loading"),t.TgZ(11,"ion-content",3)(12,"ion-grid",4),t._UZ(13,"app-messages"),t.YNc(14,C,5,4,"ion-row",5),t.ALo(15,"async"),t.qZA(),t.YNc(16,q,3,0,"ng-template",null,6,t.W1O),t.qZA()),2&n&&(t.Q6J("translucent",!0),t.xp6(5),t.AsE("",t.lcZ(6,6,"pageTitles.myRequests")," / ",t.lcZ(7,8,"pageTitles.pending"),""),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,10,o.isDesktop$)),t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(3),t.Q6J("ngIf",t.lcZ(15,12,o.requests$)))},dependencies:[i.O5,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.fG,a.Nd,a.wd,a.sr,M.n,m.a,O.N,r.d,T.t,i.Ov,c.X$],styles:["ion-icon[_ngcontent-%COMP%]{font-size:16rem;width:16rem;margin:0 auto;position:relative;top:0;left:calc(50% - 8rem);color:#a9aabc}h1[_ngcontent-%COMP%]{text-align:center;margin-top:5rem;color:#a9aabc}"]}),s})();var L=e(9299),U=e(4212),B=e(5459),K=e(1227),S=e(591),y=e(3627),J=e(6516);let N=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[i.ez,L.Bz.forChild([{path:"",component:W}]),p.u5,a.Pc,U.p,J.U,B.i,S.I,K.$,c.aw,y.I]}),s})()},5459:(A,g,e)=>{e.d(g,{i:()=>O});var i=e(6895),p=e(603),a=e(4006),_=e(9549),P=e(284),f=e(7392),t=e(4859),h=e(6338),v=e(4850),E=e(8605),c=e(671),M=e(591),m=e(4650);let O=(()=>{class r{}return r.\u0275fac=function(D){return new(D||r)},r.\u0275mod=m.oAB({type:r}),r.\u0275inj=m.cJS({imports:[i.ez,a.u5,_.lN,P.c,f.Ps,t.ot,h.ie,c.p0,v.t,E.Cl,p.Pc,M.I]}),r})()}}]);