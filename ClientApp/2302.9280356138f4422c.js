"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2302],{2302:(st,u,n)=>{n.r(u),n.d(u,{OrganizationsPageModule:()=>tt});var m=n(6895),i=n(4006),r=n(603),Z=n(671),x=n(262),z=n(2843),D=n(2340),t=n(4650),T=n(9586),A=n(529),O=n(6832),P=n(2886),S=n(8529),I=n(7632),J=n(7408),d=n(9549),g=n(9602),p=n(4385),N=n(3238),Y=n(245),_=n(7610),y=n(7785),h=n(9383);function U(o,s){1&o&&(t.TgZ(0,"ion-buttons",5),t._UZ(1,"app-logout"),t.qZA())}function Q(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Please insert start and end date "),t.qZA())}function L(o,s){if(1&o&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&o){const a=s.$implicit;t.Q6J("value",a.Value),t.xp6(1),t.hij(" ",a.Description," ")}}function M(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Please select organization"),t.qZA())}function w(o,s){if(1&o){const a=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",6),t._UZ(2,"app-messages"),t.TgZ(3,"form",7)(4,"ion-row")(5,"ion-col",8)(6,"mat-form-field",9)(7,"mat-label"),t._uU(8,"Period"),t.qZA(),t.TgZ(9,"mat-date-range-input",10),t._UZ(10,"input",11),t.ALo(11,"translate"),t._UZ(12,"input",12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"mat-datepicker-toggle",13)(15,"mat-date-range-picker",null,14),t.YNc(17,Q,2,0,"mat-error",4),t.qZA()(),t.TgZ(18,"ion-col",15)(19,"mat-form-field",9)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"mat-select",16),t.YNc(24,L,2,2,"mat-option",17),t.ALo(25,"async"),t.qZA(),t.YNc(26,M,2,0,"mat-error",4),t.qZA()(),t.TgZ(27,"ion-col",18)(28,"ion-button",19),t.NdJ("click",function(){t.CHM(a);const c=t.oxw();return t.KtG(c.onFormSubmit())}),t._UZ(29,"ion-icon",20),t.qZA()()()()()()}if(2&o){const a=t.MAs(16),e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("rangePicker",a),t.xp6(1),t.s9C("placeholder",t.lcZ(11,12,"startTime")),t.xp6(2),t.s9C("placeholder",t.lcZ(13,14,"endTime")),t.xp6(2),t.Q6J("for",a),t.xp6(3),t.Q6J("ngIf",(null==e.form.get("startDate").errors?null:e.form.get("startDate").errors.required)||(null==e.form.get("endDate").errors?null:e.form.get("endDate").errors.required)),t.xp6(4),t.Oqu(t.lcZ(22,16,"organization")),t.xp6(3),t.Q6J("ngForOf",t.lcZ(25,18,e.organizations$)),t.xp6(2),t.Q6J("ngIf",null==e.form.get("organization").errors?null:e.form.get("organization").errors.required),t.xp6(2),t.Q6J("disabled",!e.form.valid),t.xp6(1),t.Q6J("ios","search-outline")("md","search-sharp")}}const v=function(){return{}};function E(o,s){if(1&o){const a=t.EpF();t.TgZ(0,"app-list",27),t.NdJ("elementSelected",function(c){t.CHM(a);const f=t.oxw(4);return t.KtG(f.onElementSelected(c))}),t.qZA()}if(2&o){const a=t.oxw(4);t.Q6J("data",a.statisticsData.data)("schema",a.schema)("buttons",t.DdM(5,v))("hideSearch",!0)("showDetail",!1)}}function F(o,s){1&o&&(t.TgZ(0,"p",28),t._uU(1,"No Data"),t.qZA(),t._UZ(2,"ion-icon",29))}function C(o,s){if(1&o&&(t.ynx(0),t.YNc(1,E,1,6,"app-list",25),t.YNc(2,F,3,0,"ng-template",null,26,t.W1O),t.BQk()),2&o){const a=t.MAs(3),e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.statisticsData.data.length>0)("ngIfElse",a)}}function $(o,s){if(1&o&&(t.TgZ(0,"ion-col",24),t.YNc(1,C,4,2,"ng-container",4),t.qZA()),2&o){const a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!a.firstLoad)}}function G(o,s){if(1&o&&t._UZ(0,"app-table",31),2&o){const a=t.oxw(3);t.Q6J("data",a.statisticsData)("schema",a.schema)("buttons",t.DdM(3,v))}}function B(o,s){if(1&o&&(t.TgZ(0,"ion-col"),t.YNc(1,G,1,4,"app-table",30),t.qZA()),2&o){const a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!a.firstLoad)}}function K(o,s){if(1&o&&(t.TgZ(0,"ion-row"),t.YNc(1,$,2,1,"ion-col",22),t.ALo(2,"async"),t.YNc(3,B,2,1,"ng-template",null,23,t.W1O),t.qZA()),2&o){const a=t.MAs(4),e=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,e.isDesktop$))("ngIfElse",a)}}let W=(()=>{class o{constructor(a,e,c,f,ot,at,nt){this.screenSizeSrv=a,this.formBuilder=e,this.http=c,this.messagesSrv=f,this.statisticSrv=ot,this.loadingSrv=at,this.datePipe=nt,this.isDesktop$=this.screenSizeSrv.isDesktopView(),this.statisticsData=new Z.by([]),this.firstLoad=!0,this.showForm=!0,this.schema={properties:["department","hours","requestsNum","status"],noSearch:!0,title:["department"],subtitle:["organization"]},this.organizations$=this.http.get(`${D.N.apiUrl}/RequestData/DataDriven_DDL_WorkOrganizations`).pipe((0,x.K)(l=>(this.messagesSrv.showErrors(l.error.Message?l.error.Message:l.status&&l.statusText?l.status+" "+l.statusText:l.message),(0,z._)(()=>l))))}ngOnInit(){this.form=this.formBuilder.group({organization:["",{validators:[i.kI.compose([i.kI.required])]}],startDate:["",{validators:[i.kI.compose([i.kI.required])]}],endDate:["",{validators:[i.kI.compose([i.kI.required])]}]})}onFormSubmit(){if(!this.form.valid)return;const a=this.datePipe.transform(this.form.value.startDate,"yyyy-MM-dd"),e=this.datePipe.transform(this.form.value.endDate,"yyyy-MM-dd");this.loadingSrv.showLoaderUntilCompleted(this.statisticSrv.getStatistics(`/Statistics/GetCumulativeStatisticsForWO/${this.form.value.organization}/${a}/${e}`)).subscribe(c=>{this.statisticsData.data=c,this.firstLoad=!1})}onElementSelected(a){this.showForm=a}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(T.j),t.Y36(i.qu),t.Y36(A.eN),t.Y36(O.K),t.Y36(P._),t.Y36(S.b),t.Y36(m.uU))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-organizations"]],decls:15,vars:13,consts:[[3,"translucent"],["slot","start"],["slot","end",4,"ngIf"],[1,"ion-padding",3,"fullscreen"],[4,"ngIf"],["slot","end"],["size","12","size-md","8","offset-md","2","size-lg","8.5","offset-lg","1.5","size-xl","8","offset-xl","0"],[1,"filter-form",3,"formGroup"],["size","12","size-lg","5.5"],["appearance","outline","floatLabel","always","hideRequiredMarker","true"],["calendarLabel","Kalendar",3,"rangePicker"],["matStartDate","","formControlName","startDate",3,"placeholder"],["matEndDate","","formControlName","endDate",3,"placeholder"],["matIconSuffix","",3,"for"],["picker",""],["size","10","size-lg","5"],["formControlName","organization"],[3,"value",4,"ngFor","ngForOf"],["size","2","size-lg","1.5"],["fill","solid","color","secondary",3,"disabled","click"],["slot","icon-only",3,"ios","md"],[3,"value"],["size","12","size-md","8","offset-md","2",4,"ngIf","ngIfElse"],["table",""],["size","12","size-md","8","offset-md","2"],[3,"data","schema","buttons","hideSearch","showDetail","elementSelected",4,"ngIf","ngIfElse"],["noData",""],[3,"data","schema","buttons","hideSearch","showDetail","elementSelected"],[1,"no-data"],["name","alert-circle-outline",1,"no-data"],[3,"data","schema","buttons",4,"ngIf"],[3,"data","schema","buttons"]],template:function(a,e){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.YNc(8,U,2,0,"ion-buttons",2),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"ion-content",3)(11,"ion-grid"),t._UZ(12,"app-loading"),t.YNc(13,w,30,20,"ion-row",4),t.YNc(14,K,5,4,"ion-row",4),t.qZA()()),2&a&&(t.Q6J("translucent",!0),t.xp6(5),t.AsE("",t.lcZ(6,7,"menuSections.statistics")," / ",t.lcZ(7,9,"pageTitles.organizations"),""),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,11,e.isDesktop$)),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(3),t.Q6J("ngIf",e.showForm),t.xp6(1),t.Q6J("ngIf",e.statisticsData.data))},dependencies:[m.sg,m.O5,i._Y,i.Fj,i.JJ,i.JL,r.YG,r.Sm,r.wI,r.W2,r.jY,r.Gu,r.gu,r.fG,r.Nd,r.wd,r.sr,I.n,J.a,d.KE,d.hX,d.TO,d.R9,g.nW,g.wx,g.zY,g.By,g._g,i.sg,i.u,p.gD,N.ey,Y.N,_.d,y.t,m.Ov,h.X$]}),o})();var j=n(9299),b=n(591),X=n(1227),R=n(4212),H=n(7392),V=n(284),q=n(6516),k=n(3627);let tt=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,j.Bz.forChild([{path:"",component:W}]),i.u5,r.Pc,R.p,q.U,H.Ps,V.c,g.FA,i.UX,h.aw,p.LD,b.I,X.$,k.I]}),o})()}}]);