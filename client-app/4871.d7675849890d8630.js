"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4871],{4871:(ot,f,a)=>{a.r(f),a.d(f,{DepartmentsPageModule:()=>k});var d=a(6895),n=a(4006),i=a(603),D=a(671),Z=a(262),x=a(2843),T=a(2340),t=a(4650),A=a(9586),S=a(529),P=a(6832),I=a(2886),J=a(8529),z=a(7632),y=a(7408),p=a(9549),c=a(9602),u=a(4385),N=a(3238),U=a(245),Y=a(7610),M=a(7785),h=a(9383);function Q(e,r){1&e&&(t.TgZ(0,"ion-buttons",5),t._UZ(1,"app-logout"),t.qZA())}function E(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please insert start and end date "),t.qZA())}function F(e,r){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.Value),t.xp6(1),t.hij(" ",o.Description," ")}}function L(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please select department"),t.qZA())}function w(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",6),t._UZ(2,"app-loading")(3,"app-messages"),t.TgZ(4,"form",7)(5,"ion-row")(6,"ion-col",8)(7,"mat-form-field",9)(8,"mat-label"),t._uU(9,"Period"),t.qZA(),t.TgZ(10,"mat-date-range-input",10),t._UZ(11,"input",11),t.ALo(12,"translate"),t._UZ(13,"input",12),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"mat-datepicker-toggle",13)(16,"mat-date-range-picker",null,14),t.YNc(18,E,2,0,"mat-error",4),t.qZA()(),t.TgZ(19,"ion-col",15)(20,"mat-form-field",9)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",16),t.YNc(25,F,2,2,"mat-option",17),t.ALo(26,"async"),t.qZA(),t.YNc(27,L,2,0,"mat-error",4),t.qZA()(),t.TgZ(28,"ion-col",18)(29,"ion-button",19),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.onFormSubmit())}),t._UZ(30,"ion-icon",20),t.qZA()()()()()()}if(2&e){const o=t.MAs(17),s=t.oxw();t.xp6(4),t.Q6J("formGroup",s.form),t.xp6(6),t.Q6J("rangePicker",o),t.xp6(1),t.s9C("placeholder",t.lcZ(12,12,"startTime")),t.xp6(2),t.s9C("placeholder",t.lcZ(14,14,"endTime")),t.xp6(2),t.Q6J("for",o),t.xp6(3),t.Q6J("ngIf",(null==s.form.get("startDate").errors?null:s.form.get("startDate").errors.required)||(null==s.form.get("endDate").errors?null:s.form.get("endDate").errors.required)),t.xp6(4),t.Oqu(t.lcZ(23,16,"department")),t.xp6(3),t.Q6J("ngForOf",t.lcZ(26,18,s.departments$)),t.xp6(2),t.Q6J("ngIf",null==s.form.get("department").errors?null:s.form.get("department").errors.required),t.xp6(2),t.Q6J("disabled",!s.form.valid),t.xp6(1),t.Q6J("ios","search-outline")("md","search-sharp")}}const v=function(){return{}};function C(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"app-list",27),t.NdJ("elementSelected",function(m){t.CHM(o);const g=t.oxw(3);return t.KtG(g.onElementSelected(m))}),t.qZA()}if(2&e){const o=t.oxw(3);t.Q6J("data",o.statisticsData.data)("schema",o.schema)("buttons",t.DdM(5,v))("hideSearch",!0)("showDetail",!1)}}function $(e,r){1&e&&(t.TgZ(0,"p",28),t._uU(1,"No Data"),t.qZA(),t._UZ(2,"ion-icon",29))}function O(e,r){if(1&e&&(t.TgZ(0,"ion-col",24),t.YNc(1,C,1,6,"app-list",25),t.YNc(2,$,3,0,"ng-template",null,26,t.W1O),t.qZA()),2&e){const o=t.MAs(3),s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.statisticsData.data.length>0)("ngIfElse",o)}}function G(e,r){if(1&e&&(t.TgZ(0,"ion-col"),t._UZ(1,"app-table",30),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("data",o.statisticsData)("schema",o.schema)("buttons",t.DdM(3,v))}}function K(e,r){if(1&e&&(t.TgZ(0,"ion-row"),t.YNc(1,O,4,2,"ion-col",22),t.ALo(2,"async"),t.YNc(3,G,2,4,"ng-template",null,23,t.W1O),t.qZA()),2&e){const o=t.MAs(4),s=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,s.isDesktop$))("ngIfElse",o)}}let j=(()=>{class e{constructor(o,s,m,g,_,tt,et){this.screenSizeSrv=o,this.formBuilder=s,this.http=m,this.messagesSrv=g,this.statisticSrv=_,this.loadingSrv=tt,this.datePipe=et,this.isDesktop$=this.screenSizeSrv.isDesktopView(),this.statisticsData=new D.by([]),this.showForm=!0,this.departments$=this.http.get(`${T.N.apiUrl}/RequestData/DataDriven_DDL_Departments`).pipe((0,Z.K)(l=>(this.messagesSrv.showErrors(l.error.Message?l.error.Message:l.status&&l.statusText?l.status+" "+l.statusText:l.message),(0,x._)(()=>l)))),this.schema={properties:["organization","hours","requestsNum","status"],noSearch:!0,title:["department"],subtitle:["organization"]}}ngOnInit(){this.form=this.formBuilder.group({department:["",{validators:[n.kI.compose([n.kI.required])]}],startDate:["",{validators:[n.kI.compose([n.kI.required])]}],endDate:["",{validators:[n.kI.compose([n.kI.required])]}]})}onFormSubmit(){if(!this.form.valid)return;const o=this.datePipe.transform(this.form.value.startDate,"yyyy-MM-dd"),s=this.datePipe.transform(this.form.value.endDate,"yyyy-MM-dd");this.loadingSrv.showLoaderUntilCompleted(this.statisticSrv.getStatistics(`/Statistics/GetCumulativeStatisticsForDepartment/${this.form.value.department}/${o}/${s}`)).subscribe(m=>{this.statisticsData.data=m})}onElementSelected(o){this.showForm=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(A.j),t.Y36(n.qu),t.Y36(S.eN),t.Y36(P.K),t.Y36(I._),t.Y36(J.b),t.Y36(d.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-departments"]],decls:14,vars:13,consts:[[3,"translucent"],["slot","start"],["slot","end",4,"ngIf"],[1,"ion-padding",3,"fullscreen"],[4,"ngIf"],["slot","end"],["size","12","size-md","8","offset-md","2","size-lg","8.5","offset-lg","1.5","size-xl","8","offset-xl","0"],[1,"filter-form",3,"formGroup"],["size","12","size-lg","5.5"],["appearance","outline","floatLabel","always","hideRequiredMarker","true"],["calendarLabel","Kalendar",3,"rangePicker"],["matStartDate","","formControlName","startDate",3,"placeholder"],["matEndDate","","formControlName","endDate",3,"placeholder"],["matIconSuffix","",3,"for"],["picker",""],["size","10","size-lg","5"],["formControlName","department"],[3,"value",4,"ngFor","ngForOf"],["size","2","size-lg","1.5"],["fill","solid","color","secondary",3,"disabled","click"],["slot","icon-only",3,"ios","md"],[3,"value"],["size","12","size-md","8","offset-md","2",4,"ngIf","ngIfElse"],["table",""],["size","12","size-md","8","offset-md","2"],[3,"data","schema","buttons","hideSearch","showDetail","elementSelected",4,"ngIf","ngIfElse"],["noData",""],[3,"data","schema","buttons","hideSearch","showDetail","elementSelected"],[1,"no-data"],["name","alert-circle-outline",1,"no-data"],[3,"data","schema","buttons"]],template:function(o,s){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.YNc(8,Q,2,0,"ion-buttons",2),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"ion-content",3)(11,"ion-grid"),t.YNc(12,w,31,20,"ion-row",4),t.YNc(13,K,5,4,"ion-row",4),t.qZA()()),2&o&&(t.Q6J("translucent",!0),t.xp6(5),t.AsE("",t.lcZ(6,7,"menuSections.statistics")," / ",t.lcZ(7,9,"pageTitles.departments"),""),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,11,s.isDesktop$)),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("ngIf",s.showForm),t.xp6(1),t.Q6J("ngIf",s.statisticsData.data))},dependencies:[d.sg,d.O5,n._Y,n.Fj,n.JJ,n.JL,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.fG,i.Nd,i.wd,i.sr,z.n,y.a,p.KE,p.hX,p.TO,p.R9,c.nW,c.wx,c.zY,c.By,c._g,n.sg,n.u,u.gD,N.ey,U.N,Y.d,M.t,d.Ov,h.X$]}),e})();var B=a(1227),W=a(591),X=a(1635),R=a(4212),H=a(7392),V=a(284),b=a(6516),q=a(3627);let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,X.Bz.forChild([{path:"",component:j}]),n.u5,i.Pc,R.p,b.U,H.Ps,V.c,c.FA,n.UX,h.aw,u.LD,W.I,B.$,q.I]}),e})()}}]);